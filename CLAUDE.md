# 3Dモデリングツール開発メモリ

## プロジェクト概要
Webブラウザで動作する本格的な3Dモデリングツールの開発プロジェクト。Three.jsを使用し、モジュール化されたアーキテクチャで実装。

## 現在の実装状況

### 完了した機能
1. **基本アーキテクチャ**
   - ES6 Modulesによるコード分割
   - クラスベースの設計（SceneManager、ObjectFactory、CommandManager等）
   - MVCパターンの採用

2. **3Dオブジェクト作成** (10種類)
   - 基本形状：キューブ、球体、シリンダー、コーン、プレーン、トーラス
   - 多面体：四面体、八面体、十二面体、二十面体

3. **編集機能**
   - 変形ツール（移動/回転/スケール）
   - 複数選択（Shift+クリック）
   - アンドゥ/リドゥ（最大100操作）

4. **UI/UX**
   - プロパティパネル（位置、回転、スケール、マテリアル編集）
   - ショートカットキー（G/R/S、Ctrl+Z/Y、1-6、Delete等）
   - 情報バー（オブジェクト数、選択数表示）
   - ヘルプ表示機能

5. **レンダリング**
   - シャドウマップ有効化
   - アンチエイリアシング
   - レスポンシブ対応

## 技術的な要点

### ファイル構成
```
tiny-3d-modeler/
├── index.html          # メインHTML
├── css/
│   └── styles.css      # スタイルシート
├── js/
│   ├── main.js         # エントリポイント、App初期化
│   ├── SceneManager.js # Three.jsシーン管理、選択機能
│   ├── ObjectFactory.js # 3Dオブジェクト生成
│   ├── CommandManager.js # コマンドパターンでアンドゥ/リドゥ
│   ├── PropertyPanel.js # プロパティ編集UI
│   └── ShortcutManager.js # キーボードショートカット
├── README.md           # プロジェクト説明
├── .gitignore         # Git除外設定
└── CLAUDE.md          # このファイル
```

### 重要なクラス設計
- **SceneManager**: Three.jsのシーン、カメラ、レンダラー、コントロールを管理
- **CommandManager**: Commandパターンでアンドゥ/リドゥを実装
- **ObjectFactory**: 静的メソッドで各種3Dオブジェクトを生成
- **PropertyPanel**: 選択オブジェクトのプロパティをリアルタイム編集
- **ShortcutManager**: キーボードイベントを管理

## 今後の開発優先順位

### 高優先度
1. **ファイル保存/読み込み**
   - プロジェクトのJSON形式での保存
   - OBJ、GLTFファイルのエクスポート/インポート

2. **高度な編集機能**
   - グループ化/グループ解除
   - オブジェクトの複製（Ctrl+D）
   - スナップ機能（グリッド、頂点、エッジ）

3. **マテリアル拡張**
   - テクスチャマッピング
   - マテリアルプリセット
   - 環境マップ対応

### 中優先度
4. **CSG演算**
   - ブーリアン演算（和、差、積）
   - three-csg-tsライブラリの統合

5. **レイヤーシステム**
   - レイヤーの作成/削除
   - 表示/非表示切り替え
   - レイヤーロック機能

6. **測定ツール**
   - 距離測定
   - 角度測定
   - バウンディングボックス表示

### 低優先度
7. **アニメーション**
   - キーフレームアニメーション
   - パスアニメーション

8. **プラグインシステム**
   - カスタムツールの追加
   - スクリプト実行機能

## 実装時の注意点

### パフォーマンス
- オブジェクト数が増えた時の最適化が必要
- ジオメトリとマテリアルの適切なdispose処理
- レンダリング呼び出しの最小化

### ブラウザ互換性
- ES6 Modulesのため、ローカルサーバーが必要
- File APIを使用する場合のセキュリティ考慮

### UI/UX
- 右クリックメニューの実装検討
- ツールバーのカスタマイズ機能
- ダークモード/ライトモードの切り替え

## 次回の作業開始時

1. このファイルを読んで現状を把握
2. README.mdで機能一覧を確認
3. 実装したい機能を選択して開発開始

## 開発コマンド

```bash
# ローカルサーバー起動（Python）
python -m http.server 8000

# Git操作
git status
git add -A
git commit -m "メッセージ"
```

## リンクとリソース
- Three.js公式ドキュメント: https://threejs.org/docs/
- Three.js Examples: https://threejs.org/examples/
- CSGライブラリ: https://github.com/manthrax/THREE-CSGMesh